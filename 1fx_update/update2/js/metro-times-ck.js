(function(e){e.widget("metro.times",{version:"1.0.0",options:{style:{background:"bg-dark",foreground:"fg-white",divider:"fg-dark"},blink:!0,alarm:{h:0,m:0,s:0},ontick:function(e,t,n){},onalarm:function(){}},wrappers:{},_interval:0,_create:function(){var t=this,n=this.element;e.each(["Hours","Minutes","Seconds"],function(){e('<span class="count'+this+'">').html('<span class="digit-wrapper">                        <span class="digit">0</span>                    </span>                    <span class="digit-wrapper">                        <span class="digit">0</span>                    </span>').appendTo(n);this!="Seconds"&&n.append('<span class="divider"></span>')});this.wrappers=this.element.find(".digit-wrapper");n.data("blink")!=undefined&&(this.options.blink=n.data("blick"));n.data("styleBackground")!=undefined&&(this.options.style.background=n.data("styleBackground"));n.data("styleForeground")!=undefined&&(this.options.style.foreground=n.data("styleForeground"));n.data("styleDivider")!=undefined&&(this.options.style.divider=n.data("styleDivider"));this.options.style.background!="default"&&this.element.find(".digit").addClass(this.options.style.background);this.options.style.foreground!="default"&&this.element.find(".digit").addClass(this.options.style.foreground);this.options.style.divider!="default"&&this.element.find(".divider").addClass(this.options.style.divider);if(n.data("alarm")!=undefined){var r=n.data("alarm").split(":");this.options.alarm.h=r[0]!=undefined?r[0]:0;this.options.alarm.m=r[1]!=undefined?r[1]:0;this.options.alarm.s=r[2]!=undefined?r[2]:0}n.data("onalarm")!=undefined;setTimeout(function(){t.tick()},1e3)},_destroy:function(){},_setOption:function(e,t){this._super("_setOption",e,t)},tick:function(){var e=this;this._interval=setInterval(function(){var t=new Date,n,r,i;n=t.getHours();e.updateDuo(0,1,n);r=t.getMinutes();e.updateDuo(2,3,r);i=t.getSeconds();e.updateDuo(4,5,i);e.options.ontick(n,r,i);e.blinkDivider();var s=e.options.alarm;if(s&&s.h!=undefined&&s.h==n&&s.m!=undefined&&s.m==r&&s.s!=undefined&&s.s==i){e.options.onalarm();e._trigger("alarm")}},1e3)},blinkDivider:function(){this.options.blink&&this.element.find(".divider").toggleClass("no-visible")},updateDuo:function(e,t,n){this.switchDigit(this.wrappers.eq(e),Math.floor(n/10)%10);this.switchDigit(this.wrappers.eq(t),n%10)},switchDigit:function(t,n){var r=t.find(".digit");if(r.is(":animated"))return!1;if(t.data("digit")==n)return!1;t.data("digit",n);var i=e("<span>",{"class":"digit",css:{top:"-2.1em",opacity:0},html:n});i.addClass(this.options.style.background);i.addClass(this.options.style.foreground);r.before(i).removeClass("static").animate({top:"2.5em",opacity:0},"fast",function(){r.remove()});i.delay(100).animate({top:0,opacity:1},"fast");return!0}})})(jQuery);