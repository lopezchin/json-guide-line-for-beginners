(function(e){e.widget("metro.carousel",{version:"1.0.0",options:{auto:!0,period:2e3,duration:500,effect:"slowdown",direction:"left",markers:{show:!0,type:"default",position:"left"},controls:!0,stop:!0,width:"100%",height:300},_slides:{},_currentIndex:0,_interval:0,_outPosition:0,_create:function(){var e=this,t=this.options,n=carousel=this.element,r=carousel.find(".controls");n.data("auto")!=undefined&&(t.auto=n.data("auto"));n.data("period")!=undefined&&(t.period=n.data("period"));n.data("duration")!=undefined&&(t.duration=n.data("duration"));n.data("effect")!=undefined&&(t.effect=n.data("effect"));n.data("direction")!=undefined&&(t.direction=n.data("direction"));n.data("width")!=undefined&&(t.width=n.data("width"));n.data("height")!=undefined&&(t.height=n.data("height"));n.data("stop")!=undefined&&(t.stop=n.data("stop"));n.data("controls")!=undefined&&(t.controls=n.data("controls"));n.data("markersShow")!=undefined&&(t.markers.show=n.data("markersShow"));n.data("markersType")!=undefined&&(t.markers.type=n.data("markersType"));n.data("markersPosition")!=undefined&&(t.markers.position=n.data("markersPosition"));carousel.css({width:this.options.width,height:this.options.height});this._slides=carousel.find(".slide");if(this._slides.length<=1)return;this.options.markers!==!1&&this.options.markers.show&&this._slides.length>1&&this._markers(e);if(this.options.controls&&this._slides.length>1){carousel.find(".controls.left").on("click",function(){e._slideTo("prior")});carousel.find(".controls.right").on("click",function(){e._slideTo("next")})}else r.hide();this.options.stop&&carousel.on("mouseenter",function(){clearInterval(e._interval)}).on("mouseleave",function(){e.options.auto&&(e._autoStart(),e.options.period)});this.options.auto&&this._autoStart()},_autoStart:function(){var e=this;this._interval=setInterval(function(){e.options.direction=="left"?e._slideTo("next"):e._slideTo("prior")},this.options.period)},_slideTo:function(t){var n=this._slides[this._currentIndex],r;t==undefined&&(t="next");if(t==="prior"){this._currentIndex-=1;this._currentIndex<0&&(this._currentIndex=this._slides.length-1);this._outPosition=this.element.width()}else if(t==="next"){this._currentIndex+=1;this._currentIndex>=this._slides.length&&(this._currentIndex=0);this._outPosition=-this.element.width()}r=this._slides[this._currentIndex];switch(this.options.effect){case"switch":this._effectSwitch(n,r);break;case"slowdown":this._effectSlowdown(n,r,this.options.duration);break;case"fade":this._effectFade(n,r,this.options.duration);break;default:this._effectSlide(n,r,this.options.duration)}var i=this.element,s=this;i.find(".markers ul li a").each(function(){var t=e(this).data("num");t===s._currentIndex?e(this).parent().addClass("active"):e(this).parent().removeClass("active")})},_slideToSlide:function(e){var t=this._slides[this._currentIndex],n=this._slides[e];e>this._currentIndex?this._outPosition=-this.element.width():this._outPosition=this.element.width();switch(this.options.effect){case"switch":this._effectSwitch(t,n);break;case"slowdown":this._effectSlowdown(t,n,this.options.duration);break;case"fade":this._effectFade(t,n,this.options.duration);break;default:this._effectSlide(t,n,this.options.duration)}this._currentIndex=e},_markers:function(t){var n,r,i,s,o;n=e('<div class="markers '+this.options.markers.type+'" />');r=e("<ul></ul>").appendTo(n);for(s=0;s<this._slides.length;s++){i=e('<li><a href="javascript:void(0)" data-num="'+s+'"></a></li>');s===0&&i.addClass("active");i.appendTo(r)}r.find("li a").removeClass("active").on("click",function(){var n=e(this),i=n.data("num");r.find("li").removeClass("active");n.parent().addClass("active");if(i==t._currentIndex)return!0;t._slideToSlide(i);return!0});n.appendTo(this.element);switch(this.options.markers.position){case"top-left":n.css({left:"10px",right:"auto",bottom:"auto",top:"10px"});break;case"top-right":n.css({left:"auto",right:"10px",bottom:"auto",top:"0px"});break;case"top-center":n.css({left:this.element.width()/2-n.width()/2,right:"auto",bottom:"auto",top:"0px"});break;case"bottom-left":n.css({left:"10px",right:"auto"});break;case"bottom-right":n.css({right:"10px",left:"auto"});break;case"bottom-center":n.css({left:this.element.width()/2-n.width()/2,right:"auto"})}},_effectSwitch:function(t,n){e(t).hide();e(n).css({left:0}).show()},_effectSlide:function(t,n,r){e(t).animate({left:this._outPosition},r);e(n).css("left",this._outPosition*-1).show().animate({left:0},r)},_effectSlowdown:function(t,n,r){var i={duration:r,easing:"doubleSqrt"};e.easing.doubleSqrt=function(e){return Math.sqrt(Math.sqrt(e))};e(t).animate({left:this._outPosition},i);e(n).css("left",this._outPosition*-1).show().animate({left:0},i)},_effectFade:function(t,n,r){e(t).fadeOut(r);e(n).css({left:0}).fadeIn(r)},_destroy:function(){},_setOption:function(e,t){this._super("_setOption",e,t)}})})(jQuery);