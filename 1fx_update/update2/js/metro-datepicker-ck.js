// DatePicker
(function(e){e.widget("metro.datepicker",{version:"1.0.0",options:{format:"dd.mm.yyyy",date:undefined,effect:"none",position:"bottom",locale:e.Metro.currentLocale,weekStart:METRO_WEEK_START!=undefined?METRO_WEEK_START:0,otherDays:!1,selected:function(e,t){},_calendar:undefined},_create:function(){var t=this,n=this.element,r=n.children("input"),i=n.children("button.btn-date");n.data("date")!=undefined&&(this.options.date=n.data("date"));n.data("format")!=undefined&&(this.options.format=n.data("format"));n.data("effect")!=undefined&&(this.options.effect=n.data("effect"));n.data("position")!=undefined&&(this.options.position=n.data("position"));n.data("locale")!=undefined&&(this.options.locale=n.data("locale"));n.data("weekStart")!=undefined&&(this.options.weekStart=n.data("weekStart"));n.data("otherDays")!=undefined&&(this.options.otherDays=n.data("otherDays"));this._createCalendar(n,this.options.date);r.attr("readonly",!0);i.on("click",function(e){e.stopPropagation();t.options._calendar.css("display")=="none"?t._show():t._hide()});n.on("click",function(e){e.stopPropagation();t.options._calendar.css("display")=="none"?t._show():t._hide()});e("html").on("click",function(t){e(".calendar-dropdown").hide()})},_createCalendar:function(t,n){var r,i=this;r=e("<div/>").css({position:"absolute",display:"none","max-width":260,"z-index":1e3}).addClass("calendar calendar-dropdown").appendTo(t);i.options.date!=undefined&&r.data("date",i.options.date);r.calendar({multiSelect:!1,format:i.options.format,buttons:!1,locale:i.options.locale,otherDays:i.options.otherDays,weekStart:i.options.weekStart,click:function(e,n){r.calendar("setDate",n);t.children("input[type=text]").val(e);i.options.selected(e,n);i._hide()}});if(n!=undefined){r.calendar("setDate",n);t.children("input[type=text]").val(r.calendar("getDate"))}switch(this.options.position){case"top":r.css({top:0-r.height(),left:0});break;default:r.css({top:"100%",left:0})}this.options._calendar=r},_show:function(){if(this.options.effect=="slide"){e(".calendar-dropdown").slideUp("fast");this.options._calendar.slideDown("fast")}else if(this.options.effect=="fade"){e(".calendar-dropdown").fadeOut("fast");this.options._calendar.fadeIn("fast")}else{e(".calendar-dropdown").hide();this.options._calendar.show()}},_hide:function(){this.options.effect=="slide"?this.options._calendar.slideUp("fast"):this.options.effect=="fade"?this.options._calendar.fadeOut("fast"):this.options._calendar.hide()},_destroy:function(){},_setOption:function(e,t){this._super("_setOption",e,t)}})})(jQuery);